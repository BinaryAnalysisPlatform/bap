
let build_id () : unit =
  BaseEnv.var_define
    ~hide:false
    ~dump:true
    ~cli:BaseEnv.CLIWith
    ~short_desc:(fun () -> "build-id")
    "build_id"
    (fun () ->
       try
         ignore @@ OASISFileUtil.which ~ctxt "git";
         OASISExec.run_read_one_line ~ctxt "git" ["rev-parse"; "--short=7"; "HEAD"]
       with Not_found -> "") |>
  definition_end


let () =
  define [build_id]
