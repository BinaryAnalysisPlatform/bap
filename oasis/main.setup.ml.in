
let () =
  add_variable "build_id"
    ~doc:"Adds a build id to bap version"
    ~define:(function
        | Some x -> x
        | None ->
          try
            ignore @@ OASISFileUtil.which ~ctxt "git";
            OASISExec.run_read_one_line ~ctxt
              ~f_exit_code:ignore
              "git" ["rev-parse"; "--short=7"; "HEAD"]
          with Not_found -> "")
