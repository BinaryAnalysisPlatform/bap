Flag stub_resolver
  Description: Build Stub Resolver plugin
  Default: false

Library stub_resolver
 Build$:       flag(everything) || flag(stub_resolver)
  Path:         plugins/stub_resolver/
  BuildDepends: bap, bap-knowledge, bap-core-theory, core_kernel, bitvec, bitvec-order
  FindlibName:     stub_resolver
  CompiledObject:  best
  Modules:  Stub_resolver

Library stub_resolver_library_plugin
  Build$:       flag(everything) || flag(stub_resolver)
  Path:         plugins/stub_resolver/
  BuildDepends: bap, bap-abi, bap-knowledge, bap-core-theory, core_kernel, bitvec, bitvec-order, bap-main
  FindlibName:     bap-plugin-stub_resolver
  FindlibParent:   stub_resolver
  CompiledObject:  best
  InternalModules: Stub_resolver_main
  XMETADescription: Substitutes calls to stubs with calls to real functions
  XMETAExtraLines:  tags="abi"

Library stub_resolver_test
  Path:           plugins/stub_resolver
  FindLibParent:  stub_resolver
  FindlibName:    stub_resolver_test
  Build$:         flag(tests) && (flag(everything) || flag(stub_resolver))
  CompiledObject: best
  BuildDepends:   bap, oUnit, core_kernel, ppx_jane
  Install:        false
  Modules:        Stub_resolver_tests

Executable run_stub_resolver_tests
  Path:		  plugins/stub_resolver
  Build$:	  flag(tests) && (flag(everything) || flag(stub_resolver))
  CompiledObject: best
  BuildDepends:	  findlib.dynload, oUnit, bap-main, stub_resolver.stub_resolver_test
  Install:	  false
  MainIs:         run_stub_resolver_tests.ml


Test stub_resolver_tests
 TestTools: run_stub_resolver_tests
 Run$: flag(tests) && (flag(everything) || flag(stub_resolver))
 Command: $run_stub_resolver_tests